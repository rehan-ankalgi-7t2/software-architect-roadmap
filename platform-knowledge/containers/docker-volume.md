# Docker Volumes & Mounts

![](https://docs.docker.com/engine/storage/images/types-of-mounts-volume.webp)
when the containers are destroyed / deleted, the memory allocated to it is also freed up


## 1. Volumes
> Volumes are the preferred mechanism for persisting data generated by and used by Docker containers
- completely managed by docker
- Volumes on Docker Desktop have much higher performance than bind mounts from Mac and Windows hosts.
- New volumes can have their content pre-populated by a container.
- volumes can be shared among multiple containers

### create and manage volumes
```bash
# create a volume
docker volume create my-vol
```

```bash
# list volumes
docker volume ls
local           my-vol
```

```bash
# inspect a volume
docker volume inspect my-vol
#output
[
    {
        "Driver": "local",
        "Labels": {},
        "Mountpoint": "/var/lib/docker/volumes/my-vol/_data",
        "Name": "my-vol",
        "Options": {},
        "Scope": "local"
    }
]
```

```bash
# remove a volume
docker volume rm my-vol
```

```bash
# start a container with a volume (--mount flag usage)
docker run -d --name devtest --mount source=myvol2,target=/app nginx:latest

# start a container with a volume (-v flag usage)
docker run -d --name devtest -v myvol2:/app nginx:latest
```

## 2. Mounts
### bind mounts
> a directory or file on the host machine is mounted into a container
- it is referenced by an absolute path on the host machine
- any changes in either of the folders will be synced across the other folder
- deleting the container memory will not affect the host mounted folder

### tmpfs mounts
- Volumes and bind mounts let you share files between the host machine and container so that you can persist data even after the container is stopped.

- If you're running Docker on Linux, you have a third option: tmpfs mounts. When you create a container with a tmpfs mount, the container can create files outside the container's writable layer.

> a tmpfs mount is temporary, and only persisted in the host memory. When the container stops, the tmpfs mount is removed, and files written there won't be persisted.
- This is useful to temporarily store sensitive files that you don't want to persist in either the host or the container writable layer.

#### Limitations of tmpfs mounts
- Unlike volumes and bind mounts, you can't share tmpfs mounts between containers.
- This functionality is only available if you're running Docker on Linux.
- Setting permissions on tmpfs may cause them to reset after container restart. In some cases setting the uid/gid can serve as a workaround.

#### Differences between --tmpfs and --mount behavior
The `--tmpfs` flag does not allow you to specify any configurable options.
The `--tmpfs` flag cannot be used with swarm services. You must use `--mount`.